<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="padding: 20px; font-family: Arial;">
    <h1>ğŸ¬ Test Candy Shop</h1>
    <p>Simple test to send data to bot</p>
    
    <button onclick="sendTestData()" style="padding: 15px; background: #4CAF50; color: white; border: none; border-radius: 10px; font-size: 18px; cursor: pointer;">
        ğŸ›’ Test Buy Button
    </button>

    <script>
        const tg = window.Telegram.WebApp;
        
        // Initialize
        tg.expand();
        tg.ready();
        
        console.log("ğŸ”§ Telegram WebApp initialized");
        console.log("ğŸ‘¤ User data:", tg.initDataUnsafe.user);
        console.log("ğŸ“± SendData available:", typeof tg.sendData);

        function sendTestData() {
            const testData = {
                action: 'purchase',
                products: ['Test Product 1', 'Test Product 2'],
                total: 9.99
            };
            
            console.log("ğŸ“¤ Sending test data:", testData);
            
            // Send data to bot
            tg.sendData(JSON.stringify(testData));
            
            console.log("âœ… Data sent, closing app...");
            
            // Close mini app
            setTimeout(() => {
                tg.close();
            }, 500);
        }
    </script>
</body>
</html>
